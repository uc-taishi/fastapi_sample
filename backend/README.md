# FastAPIサーバ

リクエストを受けて、リクエストもとにデータを返したり、DBに新たにデータを登録したりする。

## 起動までの手順

### 必要となるライブラリをインストール

```bash
pip install -r requirements.txt
```

### 開発サーバーを起動しよう

まずはディレクトリを移動

```bash
cd backend/sample_server
```

サーバーを起動

```bash
uvicorn main:app --reload
```

## プログラム紹介

3層アーキテクチャのバックエンドは、構成がある程度決まってくる。
ただ、野放図的にプログラムを作ると可読性が下がったり、バグの温床となるので
流れが一方向になるような構成をとっておく（レイア―ドアーキテクチャやらなんやら名前があるみたい）

### main.py

起動コマンドによって走るプログラム。ここでは、リクエストを受け付けるそれぞれのエンドポイントのルーターを登録し

```python
if __name__ == "__main__":
    uvicorn.run(app, host="0.0.0.0", port=8000)
```

によって起動する

### handler

それぞれのエンドポイントを記述するプログラムを記述

```python
@app.get("/")
```

などで、エンドポイントを記述し、コントローラーの役割を果たす

### usecase

サービスクラスをまとめる役割としては、コントローラーから呼び出され、データアクセス層を呼び出す

### repository

データアクセス層のインターフェースを定義

### infra

repositoryクラスを継承し、実際のデータ操作を記述

### domain

入力モデルや出力モデルなどのデータの受け皿を定義

### injectormodules

repositoryとinfraの対応を定義

### config.py

データベース接続設定や各種設定を記載

## 課題

起動しているWebサーバの練習問題（http://localhost:3000/practice）に記載されている問題を素直に進めていってください。
問題１はコード記述例として既に回答を載せています。
問題２以降をFastAPI公式チュートリアルやSQLAlchemyの使い方を参考に実装してください。

基本的に問題ごとに
handlerファイル、usecaseファイルを追加で作成し、repositoryファイル、infraファイル、domainファイルは既存のプログラムファイルに関数を追加する形で実装してください。handlerファイルを新たに増やしたら、main.pyにルーティングの設定も行うこと。